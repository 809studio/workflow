(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{366:function(t,s,a){"use strict";a.r(s);var e=a(42),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#部署"}},[t._v("#")]),t._v(" 部署")]),t._v(" "),a("h2",{attrs:{id:"github-page"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#github-page"}},[t._v("#")]),t._v(" GitHub Page")]),t._v(" "),a("p",[t._v("使用"),a("code",[t._v("VuePress + GitHub Page + Travis CI")])]),t._v(" "),a("h3",{attrs:{id:"github"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#github"}},[t._v("#")]),t._v(" GitHub")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("在GitHub上创建新的项目")])]),t._v(" "),a("li",[a("p",[t._v("在页面右上角，点击头像，在下拉框里面点击"),a("code",[t._v("setting -> Developer settings -> Personal access tokens")]),t._v("，点击"),a("code",[t._v("Generate new token")]),t._v("生成token（保存好改token，因为只会显示一次，如果忘记了就只能重新生成）")])]),t._v(" "),a("li",[a("p",[t._v("在第一次Travis CI完成自动部署后，根据"),a("code",[t._v(".travis.yaml")]),t._v("文件里的"),a("code",[t._v("target-branch")]),t._v("字段，会自动生成一个新的分支。之后我们需要在项目的"),a("code",[t._v("settings -> Options -> Github Pages")]),t._v("里，将source选成刚刚生成的分支，如下：")])])]),t._v(" "),a("p",[a("img",{attrs:{src:"/imgs/github-pages.png",alt:"github-pages"}})]),t._v(" "),a("h3",{attrs:{id:"travis-ci"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#travis-ci"}},[t._v("#")]),t._v(" Travis CI")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("用GitHub账户注册Travis CI的账户，并授权想要自动部署的项目")])]),t._v(" "),a("li",[a("p",[t._v("将在GitHub上生成的token填入Travis CI授权项目的"),a("code",[t._v("setting -> Environment Variables")]),t._v("，"),a("code",[t._v("name")]),t._v("记得和后面"),a("code",[t._v(".travis.yaml")]),t._v("文件里的"),a("code",[t._v("github_token")]),t._v("字段的值保持一致")])])]),t._v(" "),a("p",[a("img",{attrs:{src:"/imgs/travis-ci.png",alt:"travis-ci"}})]),t._v(" "),a("h3",{attrs:{id:"vuepress"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vuepress"}},[t._v("#")]),t._v(" VuePress")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("在 "),a("code",[t._v("docs/.vuepress/config.js")]),t._v(" 中设置正确的 "),a("code",[t._v("base")]),t._v("。")]),t._v(" "),a("p",[t._v("如果你打算发布到 "),a("code",[t._v("https://<USERNAME or GROUP>.github.io/")]),t._v("，则可以省略这一步，因为 "),a("code",[t._v("base")]),t._v(" 默认即是 "),a("code",[t._v('"/"')]),t._v("。")]),t._v(" "),a("p",[t._v("如果你打算发布到 "),a("code",[t._v("https://<USERNAME or GROUP>.github.io/<REPO>/")]),t._v("（也就是说你的仓库在 "),a("code",[t._v("https://github.com/<USERNAME>/<REPO>")]),t._v("），则将 "),a("code",[t._v("base")]),t._v(" 设置为 "),a("code",[t._v('"/<REPO>/"')]),t._v("。")])]),t._v(" "),a("li",[a("p",[t._v("在项目的根目录创建一个名为 "),a("code",[t._v(".travis.yml")]),t._v(" 的文件；")])]),t._v(" "),a("li",[a("p",[t._v("在本地执行 "),a("code",[t._v("yarn")]),t._v(" 或 "),a("code",[t._v("npm install")]),t._v(" 并且提交生成的 lock 文件（即 "),a("code",[t._v("yarn.lock")]),t._v(" 或 "),a("code",[t._v("package-lock.json")]),t._v("）；")])]),t._v(" "),a("li",[a("p",[t._v("使用 "),a("code",[t._v("GitHub Pages")]),t._v(" 部署提供程序模板并遵循 "),a("a",{attrs:{href:"https://docs.travis-ci.com/user/deployment/pages/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Travis 文档"),a("OutboundLink")],1),t._v("。")])])]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("language")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" node_js\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("node_js")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" lts/*\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("branches")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("only")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" master    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 构建的分支")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cache")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("directories")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" node_modules "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 依赖缓存的目录")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("install")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" npm install\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" npm run docs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("build\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("deploy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("provider")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" pages\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("skip_cleanup")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("local_dir")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" docs/.vuepress/dist\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("github_token")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $GITHUB_TOKEN "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 在 GitHub 中生成，用于允许 Travis 向你的仓库推送代码。在 Travis 的项目设置页面进行配置，设置为 secure variable")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("target-branch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" gh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("pages\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("keep_history")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("branch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" master\n")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);